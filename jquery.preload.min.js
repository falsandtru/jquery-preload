/*
 * 
 * preload
 * 
 * ---
 * @Copyright(c) 2014, falsandtru
 * @license MIT http://opensource.org/licenses/mit-license.php
 * @version 0.0.4
 * @updated 2014/02/22
 * @author falsandtru https://github.com/falsandtru/
 * @Compressor Closure Compiler
 */
(function(d,m,l,n){function p(a,c,b,d,f,e){var k=this;switch(!0){case "string"===typeof e:e={link:e};default:k=k instanceof a?k:a(b),k=f.setProperties.call(k,null,null)}var h;h=a.extend(!0,{gns:f.name,ns:d,link:"a:not([target])",filter:function(){return/(\/|\.html?|\.php)([#?].*)?$/.test(this.href)},lock:1E3,forward:null,interval:1E3,limit:2,cooldown:1E4,query:null,fix:!1,ajax:{dataType:"text",async:!0,timeout:1500}},e);h.nss={array:[f.name].concat(h.ns&&String(h.ns).split(".")||[])};a.extend(!0,
h=h.scope&&f.scope(h)||h,{id:0,nss:{name:h.ns||"",alias:f.alias?[f.alias].concat(h.nss.array.slice(1)).join("."):!1,event:h.nss.array.join("."),data:h.nss.array.join("-"),class4html:h.nss.array.join("-"),click:["click"].concat(h.nss.array.join(":")).join("."),mousemove:["mousemove"].concat(h.nss.array.join(":")).join("."),mouseover:["mouseover"].concat(h.nss.array.join(":")).join("."),mouseout:["mouseout"].concat(h.nss.array.join(":")).join(".")},target:null,volume:0,points:[],queue:[],xhr:null,timestamp:0,
option:e});a(function(){f.registrate.call(k,a,c,b,d,f,h)});return k}var g;g={name:"preload",alias:"",ids:[],settings:[0],count:0,parseHTML:null,setAlias:function(a){g.alias="string"===typeof a?a:g.alias;g.name===g.alias||d[g.alias]||(d[g.name][g.alias]=d.fn[g.name],d.fn[g.alias]=d[g.alias]=d.fn[g.name])},setProperties:function(a,c){var b=this;if(b instanceof d||b===d[g.name])b=b instanceof d&&c!==n?b.add(c):b,b[g.name]=d[g.name];return b},loaded:{},registrate:function(a,c,b,d,f,e){e.id=f.settings.length;
f.ids.push(e.id);f.settings[e.id]=e;c=e.fix?f.canonicalizeURL(c.location.href):c.location.href;f.loaded[c.replace(/#.*/,"")]=!0;this.find(e.link).filter(e.filter).unbind(e.nss.click).one(e.nss.click,e.id,function(b){b=f.settings[b.data];a.data(this,b.nss.data)||(b.xhr&&4>b.xhr.readyState&&b.xhr.abort(),b.fix&&(this.href=f.canonicalizeURL(this.href)))}).unbind(e.nss.mouseover).bind(e.nss.mouseover,e.id,function(a){f.settings[a.data].target=this}).unbind(e.nss.mouseout).bind(e.nss.mouseout,e.id,function(a){f.settings[a.data].target=
null}).unbind(e.nss.mousemove).bind(e.nss.mousemove,e.id,function(a){var b=f.settings[a.data];a.timeStamp=(new Date).getTime();b.points.unshift(a);b.points.splice(10,1);f.check(b,a,b.target)});setTimeout(function(){e.volume-=Number(!!e.volume);setTimeout(arguments.callee,e.cooldown)},e.cooldown)},check:function(a,c,b,q){var f,e,k;if(b)switch(f=a.fix?g.canonicalizeURL(b.href):b.href,e=a.queue,!0){case !g.settings[a.id]:case g.loaded[f.replace(/#.*/,"")]:case 100<e.length:case a.interval?(new Date).getTime()-
a.timestamp<a.interval:0:case a.volume>=a.limit:case a.target!==b:case a.target.protocol!==b.protocol:case a.target.host!==b.host:case d(b).is('[target="_blank"]'):case !function(a){if(3>a.length)return!1;var b,d,c;d=a[0].timeStamp-a[1].timeStamp;b=Math.pow(a[0].pageX-a[1].pageX,2)+Math.pow(a[0].pageY-a[1].pageY,2)/(d||1);c=a[1].timeStamp-a[2].timeStamp;a=Math.pow(a[1].pageX-a[2].pageX,2)+Math.pow(a[1].pageY-a[2].pageY,2)/(c||1);switch(!0){case 100<d||100<c:return!1;case b<a+Math.pow(5,2)&&b<=Math.pow(25,
2):return!0;default:return!1}}(a.points):break;default:for(;k=e.shift();)clearTimeout(k);k=setTimeout(function(){for(;k=e.shift();)clearTimeout(k);switch(!0){case !a.target:case c!==a.points[0]:case c.pageX!==a.points[0].pageX||c.pageY!==a.points[0].pageY:break;default:a.xhr&&4>a.xhr.readyState&&a.xhr.abort();g.loaded[f.replace(/#.*/,"")]=!0;++a.volume;a.timestamp=c.timeStamp;a.lock&&(d.data(a.target,a.nss.data,"lock"),d(a.target).unbind(a.nss.click).one(a.nss.click,c.timeStamp,function(c){d(this);
var e=Math.max(a.lock-(new Date).getTime()+c.data,0);e&&(d.data(b,a.nss.data,"click"),setTimeout(function(){switch(d.data(c.currentTarget,a.nss.data)){case "click":a.forward&&!1!==g.fire(a.forward,null,[f,a.xhr])?d.removeData(c.currentTarget,a.nss.data):(a.xhr&&4>a.xhr.readyState&&a.xhr.abort(),d(c.currentTarget).removeData(a.nss.data),d(l).find(c.currentTarget)[0]&&(d(l).unbind(a.nss.click).one(a.nss.click,function(a){a.isDefaultPrevented()||(m.location.href=b.href)}),d(c.currentTarget).click()));
break;default:d.removeData(c.currentTarget,a.nss.data)}},e),c.preventDefault(),c.stopPropagation())}));var h=d.extend(!0,{},a.ajax,{url:f.replace(/([^#]+)(#[^\s]*)?$/,"$1"+(a.query?(f.match(/\?/)?"&":"?")+a.query:"")+"$2"),success:function(){g.fire(a.ajax.success,this,arguments);g.loaded[this.url.replace(/#.*/,"")]=!0;a.volume-=Number(304===arguments[2].status&&!!a.volume);switch(d.data(b,a.nss.data)){case "click":d(b).removeData(a.nss.data);d(l).find(b)[0]&&(d(l).unbind(a.nss.click).one(a.nss.click,
function(a){a.isDefaultPrevented()||(m.location.href=b.href)}),d(b).click());break;default:d.removeData(b,a.nss.data)}},error:function(){g.fire(a.ajax.error,this,arguments);a.volume-=Number(!!a.volume);d.removeData(b,a.nss.data)}});a.xhr=d.ajax(h)}},30);e.push(k)}},canonicalizeURL:function(a){var c;c=g.trim(a);c=c.replace(/[<>"{}|\\^\[\]`\s].*/,"");c=/^https?:/i.test(c)?c:d("<a/>",{href:c})[0].href;c=encodeURI(decodeURI(c));return c=c.replace(/(?:%\w{2})+/g,function(b){return a.match(b.toLowerCase())||
b})},trim:function(a){if(String.prototype.trim)a=String(a).trim();else if(a=String(a).replace(/^\s+/,""))for(var c=a.length;--c;)if(/\S/.test(a.charAt(c))){a=a.substring(0,c+1);break}return a},fire:function(a,c,b,d){return"function"===typeof a?d?setTimeout(function(){a.apply(c,b)},0):a.apply(c,b):a}};(function(a,c,b,d,f){a.fn[f.name]=a[f.name]=function(){return p.apply(this,[a,c,b,d,f].concat([].slice.call(arguments)))};f.setProperties.call(a[f.name])}).apply(this,[].slice.call(arguments).concat([g]))})(jQuery,
window,document,void 0);
